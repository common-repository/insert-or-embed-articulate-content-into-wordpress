!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=wp.i18n.__,m=wp.components,d=m.ButtonGroup,f=m.Button,y=wp.element,b=y.Component,h=y.Fragment,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(s,e);var t,n,r,a=c(s);function s(){var e;return i(this,s),(e=a.apply(this,arguments)).state={notice:!0},e}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this,t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"chunkFileUpload",container:document.getElementById("articulate_uploader"),url:articulateOptions.ajax_url,chunk_size:articulateOptions.plupload.chunk_size,max_retries:articulateOptions.plupload.max_retries,dragdrop:!0,multi_selection:!1,file_data_name:"async-upload",multipart_params:{_ajax_nonce:articulateOptions._nonce_upload_file,action:"articulate_upload_file"},filters:{max_file_size:"0",mime_types:[{title:"Zip files",extensions:"zip"},{title:"MP4 files",extensions:"mp4"}]},init:{PostInit:function(){document.getElementById("chunkFileUploadButton").onclick=function(){t.start()}},UploadProgress:function(e,t){100===e.total.percent?document.getElementById("fileArea").innerHTML="".concat(t.name," uploaded. Unzipping content."):document.getElementById("fileArea").innerHTML="".concat(t.name," is uploading at ").concat(e.total.percent,"%")},FileUploaded:function(t,n,r){var i=jQuery.parseJSON(r.response);document.getElementById("fileArea").innerHTML=i.info,1===i.OK&&(e.props.insertData(i),e.setState({notice:!1}),setTimeout((function(){var e=document.getElementById("trial-notice");null!==e&&e.classList.add("hide-notice")}),500))},FilesAdded:function(e,n){1<t.files.length&&t.removeFile(t.files[0]),document.getElementById("fileArea").innerHTML="".concat(t.files[0].name," (").concat((t.files[0].size/1024/1024).toFixed(1)," mb)")},Error:function(e,t){console.log(t)}}});t.init()}},{key:"render",value:function(){return wp.element.createElement(h,null,wp.element.createElement(d,{id:"articulate_uploader"},wp.element.createElement(f,{className:"material-btn grey",id:"chunkFileUpload"},p("Choose your zip file")),wp.element.createElement(f,{id:"chunkFileUploadButton",className:"material-btn",isBusy:!!this.isUploading},wp.element.createElement("i",{class:"upload-icon"},"call_made"),p("Upload!"))),wp.element.createElement("p",{class:"fileArea",id:"fileArea"}))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(b);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,l,"next",e)}function l(e){E(o,r,i,a,l,"throw",e)}a(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}();return function(){var n,r=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=wp.i18n.__,D=wp,A=D.apiFetch,U=(D.apiRequest,wp.components),N=U.Button,B=U.ButtonGroup,R=U.Dashicon,q=U.Modal,I=U.PanelBody,M=U.Placeholder,H=U.RadioControl,G=(U.SelectControl,U.Spinner),Q=U.TextControl,J=wp.element,K=J.Component,Z=J.Fragment,V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(s,e);var t,n,r,i,o,a,l,c=P(s);function s(){var e;return S(this,s),(e=c.apply(this,arguments)).getCount=e.getCount.bind(z(e)),e.getLibrary=e.getLibrary.bind(z(e)),e.deleteLibrary=e.deleteLibrary.bind(z(e)),e.insertData=e.insertData.bind(z(e)),e.insertUpload=e.insertUpload.bind(z(e)),e.changeIcon=e.changeIcon.bind(z(e)),e.state={options:{type:"iframe",iFrameOption:"default",ratio:"4:3",lightboxTitleType:"default",linkType:"default"},isUploadOpen:!1,isLibraryOpen:!1,data:[],tempData:null,isLoaded:!1,dir:articulateOptions.dir,count:articulateOptions.count},e}return t=s,(n=[{key:"makeFormData",value:function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return t}},{key:"getCount",value:(l=k(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({url:articulateOptions.ajax_url+"?action=articulate_get_dir_data",method:"get"});case 2:t=e.sent,n=t.dir_list,this.setState({dir:n.length});case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getLibrary",value:(a=k(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({url:articulateOptions.ajax_url+"?action=articulate_get_dir_data",method:"get"});case 2:t=e.sent,n=t.dir_list,this.setState({data:n,isLoaded:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"deleteLibrary",value:(o=k(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoaded:!1}),n=this.makeFormData({action:"del_dir",_ajax_nonce:articulateOptions._nonce_del_dir,dir:t,return_dir_list:1}),e.next=4,A({url:articulateOptions.ajax_url,method:"post",body:n});case 4:if("fail"!=(r=e.sent).status){e.next=7;break}return e.abrupt("return");case 7:i=r.dir_list,void 0!==this.props.attributes.src&&this.props.attributes.src.includes(t)&&this.props.setAttributes({src:"",href:""}),this.setState({dir:i.length}),this.setState({data:i,isLoaded:!0});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"insertData",value:function(e){this.setState({tempData:e}),this.getCount()}},{key:"insertUpload",value:(i=k(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.tempData,r=t.options,i=this.makeFormData({action:"rename_dir",_ajax_nonce:articulateOptions._nonce_rename_dir,dir_name:n.folder,title:void 0!==n.newFolder?n.newFolder:""}),e.next=4,A({url:articulateOptions.ajax_url,method:"post",body:i});case 4:void 0!==(o=e.sent)&&("success"==o[0]&&(n.newFolder=o[1]),a=n.path.replace(n.folder,n.newFolder||n.folder),r.src=a,r.href=a,l=v({},r),this.props.setAttributes(v({},l)),this.setState({isUploadOpen:!1,tempData:null}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"changeIcon",value:function(){setTimeout((function(){var e=document.querySelectorAll(".modal-collect .components-panel__body");Object.keys(e).forEach((function(t){e[t].classList.contains("is-opened")?(e[t].nextElementSibling.classList.remove("dashicons-visibility"),e[t].nextElementSibling.classList.add("dashicons-external")):(e[t].nextElementSibling.classList.remove("dashicons-external"),e[t].nextElementSibling.classList.add("dashicons-visibility"))}))}),200)}},{key:"initMaterializeSelect",value:function(){setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),500),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),1e3),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),1500),setTimeout((function(){for(var e=document.querySelectorAll(".elearning-block-scope .input-field select:not(.materialize__done)"),t=0;t<e.length;t++)e[t].classList.add("materialize__done")}),2e3),setTimeout((function(){for(var e=document.querySelectorAll('.quiz-insert-as-options-box input[value="lightbox"]:not(.materialize__done), .quiz-insert-as-options-box input[value="open_link_in_new_window"]:not(.materialize__done), .quiz-insert-as-options-box input[value="open_link_in_same_window"]:not(.materialize__done)'),t=0;t<e.length;t++)e[t].setAttribute("disabled","disabled"),e[t].classList.add("materialize__done");for(var n=document.querySelectorAll(".quiz-size-options-box ul.select-dropdown li span:not(.materialize__done)"),r=0;r<n.length;r++)"Default"!=n[r].innerHTML&&n[r].parentElement.classList.add("disabled"),n[r].classList.add("materialize__done")}),500)}},{key:"render",value:function(){var e=this,t=this.state,n=t.options,r=t.isUploadOpen,i=t.isLibraryOpen,o=t.data,a=t.tempData,l=t.isLoaded;return wp.element.createElement(Z,null,wp.element.createElement("div",{className:"elearning-block-scope"},wp.element.createElement(M,{icon:"welcome-learn-more",label:T("e-Learning")},this.props.attributes.src?wp.element.createElement(Z,null,this.props.attributes.src,wp.element.createElement(B,null,wp.element.createElement(N,{className:"material-btn grey",onClick:function(){return e.props.setAttributes({src:"",href:""})}},T("Remove")),wp.element.createElement(N,{className:"material-btn",onClick:function(){e.getLibrary(),e.setState({isLibraryOpen:!0})}},T("Choose Another")))):wp.element.createElement(Z,null,wp.element.createElement("span",null,T("Upload a .zip or .mp4 file that you published from your tool or choose an existing content item.")),wp.element.createElement(B,null,wp.element.createElement(N,{className:"material-btn grey",onClick:function(){return e.setState({isUploadOpen:!0})}},T("Upload")),wp.element.createElement(N,{className:"material-btn",onClick:function(){e.getLibrary(),e.setState({isLibraryOpen:!0})}},T("Content Library"))))),r&&wp.element.createElement(q,{title:T(""),className:"elearning-modal elearning-block-scope",onRequestClose:function(){return e.setState({isUploadOpen:!1})},shouldCloseOnClickOutside:!1},this.initMaterializeSelect(),wp.element.createElement("h2",{class:"header-upload-file"},T("Upload File")),wp.element.createElement(w,{insertData:this.insertData,options:this.state}),null!==a&&wp.element.createElement("div",{className:"collectionUpload"},wp.element.createElement(Q,{label:T("Title:"),className:"top-margin small-title",type:"text",value:void 0!==a.newFolder?a.newFolder:a.folder,onChange:function(t){a.newFolder=t,e.setState({tempData:a})}}),wp.element.createElement(H,{label:T("Insert As:"),className:"top-margin large-title quiz-insert-as-options-box",selected:"iframe_responsive"!=n.type&&n.type?n.type:"iframe",options:[{label:"iFrame",value:"iframe"},{label:"Lightbox (Paid Feature)",value:"lightbox"},{label:"Link that opens in a new window (Paid Feature)",value:"open_link_in_new_window"},{label:"Link that opens in a same window (Paid Feature)",value:"open_link_in_same_window"}],onChange:function(t){n.type=t,e.setState({options:n})}}),wp.element.createElement(B,null,wp.element.createElement(N,{className:"material-btn top-margin",onClick:this.insertUpload},T("Insert"))),wp.element.createElement("p",null,wp.element.createElement("iframe",{src:"https://www.elearningfreak.com/wordpresspluginlatesttrial500.html?v=43000000024&editor=gutenburg",width:"600px",frameborder:"0"}))),wp.element.createElement("iframe",{width:"600",height:"338",src:"https://www.youtube.com/embed/exojBaymRkw",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),i&&wp.element.createElement(q,{title:T(""),className:"elearning-modal elearning-block-scope",onRequestClose:function(){return e.setState({isLibraryOpen:!1})},shouldCloseOnClickOutside:!1},this.initMaterializeSelect(),!0!==l?wp.element.createElement(M,null,wp.element.createElement(G,null)):null!==o?wp.element.createElement("div",{className:"collection"},wp.element.createElement("div",{class:"collection-header"},wp.element.createElement("h4",null,T("Content Library"))),Object.keys(o).map((function(t){return wp.element.createElement("div",{className:"modal-collect",onClick:function(){e.changeIcon(),e.initMaterializeSelect()}},wp.element.createElement(I,{title:o[t].dir,initialOpen:!1,key:t},wp.element.createElement(H,{label:T("Insert As"),className:"top-margin large-title quiz-insert-as-options-box",selected:"iframe_responsive"!=n.type&&n.type?n.type:"iframe",options:[{label:"iFrame",value:"iframe"},{label:"Lightbox (Paid Feature)",value:"lightbox"},{label:"Link that opens in a new window (Paid Feature)",value:"open_link_in_new_window"},{label:"Link that opens in a same window (Paid Feature)",value:"open_link_in_same_window"}],onChange:function(t){n.type=t,e.setState({options:n})}}),wp.element.createElement(B,null,wp.element.createElement(N,{className:"material-btn top-margin",onClick:function(){n.src="".concat(o[t].path+o[t].dir,"/").concat(o[t].file),n.href="".concat(o[t].path+o[t].dir,"/").concat(o[t].file);var r=v({},n);e.props.setAttributes(v({},r)),e.setState({isLibraryOpen:!1})}},T("Insert")),wp.element.createElement(N,{icon:"trash",label:T("Delete"),className:"top-margin delete-icon-button",onClick:function(){confirm(T("Are you sure you want to do this?"))&&e.deleteLibrary(o[t].dir)}})),wp.element.createElement("p",null,wp.element.createElement("iframe",{src:"https://www.elearningfreak.com/wordpresspluginlatesttrial500.html?v=43000000024",width:"600px",frameborder:"0"}))),wp.element.createElement(R,{className:"floating-eye",icon:"visibility"}),wp.element.createElement(N,{icon:"trash",label:T("Delete"),className:"top-margin delete-icon-button float",onClick:function(){confirm(T("Are you sure you want to do this?"))&&e.deleteLibrary(o[t].dir)}}))}))):wp.element.createElement(Z,null,wp.element.createElement("p",null,T("Empty.  Please upload content.")),wp.element.createElement(N,{className:"material-btn grey no-margin",onClick:function(){e.setState({isUploadOpen:!0,isLibraryOpen:!0})}},T("Upload"))))))}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(K),W=wp.i18n.__,X=wp.blocks.registerBlockType;t.default=X("e-learning/block",{title:W("e-Learning"),description:W("Quickly embed or insert e-learning content into a post or page. Supports Articulate, Captivate, iSpring, and more."),category:"common",icon:"welcome-learn-more",keywords:[W("e-learning"),W("learn"),W("course")],attributes:{src:{type:"string"},href:{type:"string"},type:{type:"string",default:"iframe"},width:{type:"string",default:"100%"},height:{type:"string",default:"600"},ratio:{type:"string",default:"4:3"},frameborder:{type:"number",default:0},scrolling:{type:"string",default:"no"},title:{type:"string"},link_text:{type:"string"},button:{type:"string"},scrollbar:{type:"string"},colorbox_theme:{type:"string"},size_opt:{type:"string"}},edit:V,save:function(){return null}})}]);